# üéØ Syst√®me de Sniping Automatique $DAU sur Doppler

Ce guide explique comment configurer le sniping automatique du token $DAU d√®s qu'il est d√©ploy√© sur Doppler.

## üìã Pr√©requis

1. **Bot Discord** configur√© et fonctionnel
2. **Bot Telegram** avec API 0x configur√©
3. **Wallet** avec ETH sur Base
4. **Variables d'environnement** configur√©es

## üöÄ Configuration Rapide

### 1. Configuration du Bot Discord

Ajoutez ces variables d'environnement √† votre bot Discord :

```bash
# Configuration du snipe automatique
DOPPLER_SNIPE_ENABLED=true
DOPPLER_SNIPE_TICKER=DAU
DOPPLER_SNIPE_AMOUNT=0.1

# URL du webhook Telegram (√† remplacer par votre URL)
TELEGRAM_WEBHOOK_URL=http://votre-serveur:3000/webhook/snipe
TELEGRAM_CHAT_ID=votre_chat_id
```

### 2. Configuration du Bot Telegram

Dans le dossier `tgbotv4-master`, ajoutez Express aux d√©pendances :

```bash
npm install express
```

### 3. D√©marrage du Serveur Webhook

```bash
cd tgbotv4-master
npm run webhook
```

Le serveur webhook sera accessible sur `http://localhost:3000`

## ‚öôÔ∏è Commandes Discord Disponibles

### Activer le Sniper $DAU
```
!snipedau [montant]
```
- Active le sniping automatique pour $DAU
- Montant optionnel (d√©faut: 0.1 ETH)

### D√©sactiver le Sniper
```
!snipedauoff
```

### Voir la Configuration
```
!snipedauconfig
```

## üîß Configuration Avanc√©e

### Variables d'Environnement

| Variable | Description | D√©faut |
|----------|-------------|---------|
| `DOPPLER_SNIPE_ENABLED` | Active/d√©sactive le sniper | `false` |
| `DOPPLER_SNIPE_TICKER` | Ticker √† surveiller | `DAU` |
| `DOPPLER_SNIPE_AMOUNT` | Montant ETH pour le snipe | `0.1` |
| `TELEGRAM_WEBHOOK_URL` | URL du webhook Telegram | - |
| `TELEGRAM_CHAT_ID` | ID du chat Telegram | - |

### Endpoints Webhook Disponibles

#### POST `/webhook/snipe`
D√©clenche un snipe automatique

**Body:**
```json
{
  "action": "snipe",
  "token_address": "0x...",
  "amount_eth": 0.1,
  "platform": "doppler",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

#### GET `/health`
Statut du serveur webhook

#### GET `/balance/eth`
Solde ETH du wallet

#### POST `/test/buy`
Test d'achat manuel

## üîÑ Flux de Fonctionnement

1. **D√©tection** : Le bot Discord surveille les d√©ploiements Doppler
2. **Filtrage** : V√©rifie si le ticker correspond √† $DAU
3. **Alerte** : Envoie une alerte sp√©ciale dans Discord
4. **Webhook** : Envoie une requ√™te au bot Telegram
5. **Snipe** : Le bot Telegram ex√©cute l'achat automatiquement
6. **Confirmation** : Retourne le r√©sultat au bot Discord

## üõ°Ô∏è S√©curit√©

- **Validation** : Toutes les adresses et montants sont valid√©s
- **Limites** : Montant minimum de 0.00001 ETH
- **Slippage** : 2% par d√©faut pour √©viter les √©checs
- **Logs** : Toutes les transactions sont logg√©es

## üß™ Tests

### Test du Webhook
```bash
curl -X POST http://localhost:3000/webhook/snipe \
  -H "Content-Type: application/json" \
  -d '{
    "action": "snipe",
    "token_address": "0x1234567890123456789012345678901234567890",
    "amount_eth": 0.01,
    "platform": "doppler"
  }'
```

### Test de Sant√©
```bash
curl http://localhost:3000/health
```

### Test de Solde
```bash
curl http://localhost:3000/balance/eth
```

## üìä Monitoring

### Logs Discord
- Alerte sp√©ciale quand $DAU est d√©tect√©
- Statut du snipe (en cours, r√©ussi, √©chec)
- Lien vers la transaction

### Logs Telegram
- D√©marrage du snipe
- R√©sultat de la transaction
- Hash de la transaction

### Logs Webhook
- Requ√™tes re√ßues
- Erreurs de validation
- Performances des transactions

## üö® D√©pannage

### Le sniper ne se d√©clenche pas
1. V√©rifiez `DOPPLER_SNIPE_ENABLED=true`
2. V√©rifiez que le ticker correspond exactement
3. V√©rifiez les logs Discord

### Erreur webhook
1. V√©rifiez l'URL du webhook
2. V√©rifiez que le serveur webhook est d√©marr√©
3. V√©rifiez les logs du serveur webhook

### √âchec de transaction
1. V√©rifiez le solde ETH
2. V√©rifiez la liquidit√© du token
3. V√©rifiez les param√®tres de slippage

## üìà Optimisations

### Performance
- D√©tection en temps r√©el via WebSocket
- Validation rapide des param√®tres
- Ex√©cution parall√®le des v√©rifications

### Fiabilit√©
- Reconnexion automatique en cas de perte de connexion
- Retry automatique en cas d'√©chec
- Fallback sur les donn√©es de transaction

### S√©curit√©
- Validation stricte des adresses
- Limites de montant configurables
- Logs d√©taill√©s pour audit

## üéØ Utilisation

1. **Activez le sniper** : `!snipedau 0.1`
2. **Surveillez les alertes** : Le bot enverra une alerte sp√©ciale quand $DAU sera d√©tect√©
3. **V√©rifiez les transactions** : Utilisez les liens BaseScan pour v√©rifier les achats
4. **D√©sactivez si n√©cessaire** : `!snipedauoff`

Le syst√®me est maintenant pr√™t √† sniper automatiquement $DAU d√®s qu'il sera d√©ploy√© sur Doppler ! üöÄ 