# üéØ Commandes de Snipe avec Double Wallet et FID

## üìã **Nouvelles Fonctionnalit√©s**

### ‚ú® **Syst√®me de Double Wallet**
- **Wallet W1** : Configuration principale (SNIPINGWALLETKEY + ZEROX_API_KEY)
- **Wallet W2** : Configuration secondaire (SNIPINGWALLETKEY2 + ZEROX_API_KEY2)
- **S√©lection du wallet** : Choix du wallet lors de la configuration du snipe

### ‚ú® **Snipe par FID**
- **Snipe par adresse** : Surveillance d'une adresse Ethereum sp√©cifique
- **Snipe par FID** : Surveillance d'un FID (Farcaster ID) sp√©cifique
- **D√©tection automatique** : Le bot d√©tecte les d√©ploiements par adresse ou par FID

---

## üöÄ **Commandes Mises √† Jour**

### 1. **`!setupsnipe <adresse> <montant> <tentatives> <wallet>`**
Configure un snipe pour une adresse track√©e avec un wallet sp√©cifique.

**Param√®tres :**
- `<adresse>` : Adresse Ethereum √† tracker (0x...)
- `<montant>` : Montant en ETH √† investir
- `<tentatives>` : Nombre de tentatives (1-10)
- `<wallet>` : Wallet √† utiliser (W1 ou W2)

**Exemples :**
```
!setupsnipe 0x3883890A0C0983bE825E353b809A96aC4fA0077e 0.001 5 W1
!setupsnipe 0x1234...5678 0.005 3 W2
!setupsnipe 0xabcd...efgh 0.01 1 W1
```

**R√©ponse :**
```
‚úÖ Snipe configur√© avec succ√®s !
**Adresse track√©e:** `0x3883890A0C0983bE825E353b809A96aC4fA0077e`
**Montant:** 0.001 ETH
**Tentatives:** 5
**Wallet:** W1 (`0x...`)

Le bot ach√®tera automatiquement 0.001 ETH du token d√®s que cette adresse d√©ploiera un nouveau clanker.
En cas d'√©chec, le bot r√©essaiera jusqu'√† 5 fois avec un d√©lai de 0.5 seconde entre chaque tentative.
```

### 2. **`!cancelsnipe <adresse> <wallet>`**
Annule un snipe actif pour une adresse track√©e avec un wallet sp√©cifique.

**Param√®tres :**
- `<adresse>` : Adresse Ethereum track√©e (0x...)
- `<wallet>` : Wallet utilis√© (W1 ou W2)

**Exemples :**
```
!cancelsnipe 0x3883890A0C0983bE825E353b809A96aC4fA0077e W1
!cancelsnipe 0x1234...5678 W2
```

**R√©ponse :**
```
‚úÖ Snipe annul√© avec succ√®s !
**Adresse:** `0x3883890A0C0983bE825E353b809A96aC4fA0077e`
**Wallet:** W1
**Montant:** 0.001 ETH
```

### 3. **`!setupsnipefid <FID> <montant> <tentatives> <wallet>`** ‚≠ê **NOUVEAU**
Configure un snipe pour un FID track√© avec un wallet sp√©cifique.

**Param√®tres :**
- `<FID>` : FID (Farcaster ID) √† tracker
- `<montant>` : Montant en ETH √† investir
- `<tentatives>` : Nombre de tentatives (1-10)
- `<wallet>` : Wallet √† utiliser (W1 ou W2)

**Exemples :**
```
!setupsnipefid 12345 0.001 5 W1
!setupsnipefid 67890 0.005 3 W2
!setupsnipefid 11111 0.01 1 W1
```

**R√©ponse :**
```
‚úÖ Snipe FID configur√© avec succ√®s !
**FID track√©:** `12345`
**Montant:** 0.001 ETH
**Tentatives:** 5
**Wallet:** W1 (`0x...`)

Le bot ach√®tera automatiquement 0.001 ETH du token d√®s que ce FID d√©ploiera un nouveau clanker.
En cas d'√©chec, le bot r√©essaiera jusqu'√† 5 fois avec un d√©lai de 0.5 seconde entre chaque tentative.
```

### 4. **`!cancelsnipefid <FID> <wallet>`** ‚≠ê **NOUVEAU**
Annule un snipe actif pour un FID track√© avec un wallet sp√©cifique.

**Param√®tres :**
- `<FID>` : FID (Farcaster ID) track√©
- `<wallet>` : Wallet utilis√© (W1 ou W2)

**Exemples :**
```
!cancelsnipefid 12345 W1
!cancelsnipefid 67890 W2
```

**R√©ponse :**
```
‚úÖ Snipe FID annul√© avec succ√®s !
**FID:** `12345`
**Wallet:** W1
**Montant:** 0.001 ETH
```

### 5. **`!listsnipes`** (Mise √† jour)
Affiche maintenant le wallet utilis√© et le type de snipe pour chaque snipe actif.

**Exemple de r√©ponse :**
```
üéØ Snipes Actifs
2 snipe(s) actif(s)

Adresse: `0x3883890A0C0983bE825E353b809A96aC4fA0077e`
**Adresse:** `0x3883890A0C0983bE825E353b809A96aC4fA0077e`
**Montant:** 0.001 ETH
**Tentatives:** 5
**Wallet:** W1
**Type:** address
**Cr√©√©:** 2025-09-18 21:42:13.572912

FID: `12345`
**FID:** `12345`
**Montant:** 0.005 ETH
**Tentatives:** 3
**Wallet:** W2
**Type:** fid
**Cr√©√©:** 2025-09-18 22:15:30.123456
```

---

## üîß **Configuration des Variables d'Environnement**

### **Variables Requises :**

#### **Wallet W1 (Principal) :**
```bash
SNIPINGWALLETKEY=0x...  # Cl√© priv√©e du wallet W1
ZEROX_API_KEY=...       # Cl√© API 0x pour W1
```

#### **Wallet W2 (Secondaire) :**
```bash
SNIPINGWALLETKEY2=0x... # Cl√© priv√©e du wallet W2
ZEROX_API_KEY2=...      # Cl√© API 0x pour W2
```

### **Migration Automatique :**
La base de donn√©es est automatiquement migr√©e pour inclure les nouveaux champs :
- **`wallet_id`** : W1 ou W2
- **`snipe_type`** : address ou fid
- **`tracked_fid`** : FID track√© (pour les snipes par FID)

---

## üéØ **Fonctionnement du Syst√®me**

### **D√©tection des D√©ploiements :**

#### **Snipe par Adresse :**
1. **D√©tection** : Le bot surveille les d√©ploiements V3/V4
2. **V√©rification** : L'adresse du cr√©ateur correspond √† l'adresse track√©e
3. **Ex√©cution** : Lancement du snipe avec le wallet configur√©

#### **Snipe par FID :**
1. **D√©tection** : Le bot surveille les d√©ploiements V3/V4
2. **V√©rification** : Le FID du cr√©ateur correspond au FID track√©
3. **Ex√©cution** : Lancement du snipe avec le wallet configur√©

### **S√©lection du Wallet :**
- **W1** : Utilise `SNIPINGWALLETKEY` + `ZEROX_API_KEY`
- **W2** : Utilise `SNIPINGWALLETKEY2` + `ZEROX_API_KEY2`
- **Validation** : V√©rification que le wallet est configur√© avant l'ex√©cution

---

## üìä **Messages Discord en Temps R√©el**

### **D√©but du Snipe :**
```
üéØ Snipe Automatique en Cours
Ex√©cution du snipe configur√© pour Adresse: `0x3883890A0C0983bE825E353b809A96aC4fA0077e`

Token: etest (etest)
Montant: 0.001 ETH
Tentatives: 5
Wallet: W1
Type: address
Cible Track√©e: `0x3883890A0C0983bE825E353b809A96aC4fA0077e`
Contract: `0x77E548985A539FCb5400B9eD6B2aeea4a6d52B07`
```

### **Succ√®s :**
```
‚úÖ Snipe R√©ussi !
Snipe automatique ex√©cut√© avec succ√®s (Tentative 2/5)

Token: etest (etest)
Montant: 0.001 ETH
Tentative: 2/5
Wallet: W1
Type: address
Transaction: 0x1234...5678
Tokens Achet√©s: 1000000 wei
ETH Vendus: 1000000000000000 wei

[Voir Transaction] (bouton)
```

### **√âchec :**
```
‚ùå √âchec du Snipe
Le snipe automatique a √©chou√© apr√®s 5 tentatives

Token: etest (etest)
Montant: 0.001 ETH
Tentatives: 5
Wallet: W1
Type: address
Derni√®re Erreur: Insufficient liquidity for this trade
```

---

## üéØ **Cas d'Usage Avanc√©s**

### **Strat√©gie Multi-Wallet :**
```bash
# Snipe agressif avec W1
!setupsnipe 0x1234...5678 0.01 10 W1

# Snipe conservateur avec W2
!setupsnipe 0x1234...5678 0.005 3 W2

# Snipe par FID avec W1
!setupsnipefid 12345 0.001 5 W1
```

### **Gestion des Risques :**
- **W1** : Wallet principal pour les snipes importants
- **W2** : Wallet secondaire pour les snipes de test
- **S√©paration** : Chaque wallet peut avoir des montants et tentatives diff√©rents

### **Surveillance Hybride :**
- **Adresse + FID** : Surveillance simultan√©e d'une adresse et d'un FID
- **Wallets diff√©rents** : Utilisation de W1 pour l'adresse et W2 pour le FID
- **Flexibilit√©** : Configuration ind√©pendante pour chaque cible

---

## ‚ö†Ô∏è **Limitations et Consid√©rations**

### **Limites :**
- **Maximum 10 tentatives** par snipe
- **D√©lai fixe de 0.5 seconde** entre chaque tentative
- **2 wallets maximum** (W1 et W2)

### **Consid√©rations :**
- **Gas fees** : Chaque tentative consomme du gas
- **Configuration** : Les deux wallets doivent √™tre configur√©s
- **API Keys** : Chaque wallet n√©cessite sa propre cl√© API 0x
- **Liquidit√©** : Le retry ne garantit pas le succ√®s si la liquidit√© reste insuffisante

---

## üöÄ **Exemple Complet**

```bash
# Configuration des snipes
!setupsnipe 0x3883890A0C0983bE825E353b809A96aC4fA0077e 0.001 5 W1
!setupsnipefid 12345 0.005 3 W2

# V√©rification
!listsnipes

# R√©sultat attendu lors d'un d√©ploiement :
# 1. D√©tection du token V4 par l'adresse 0x3883...
# 2. Lancement du snipe avec W1 (5 tentatives)
# 3. Tentative 1: √âchec (liquidit√© insuffisante)
# 4. Attente 0.5 seconde
# 5. Tentative 2: Succ√®s ‚úÖ
# 6. Transaction confirm√©e sur Basescan avec W1

# OU

# 1. D√©tection du token V4 par le FID 12345
# 2. Lancement du snipe avec W2 (3 tentatives)
# 3. Tentative 1: Succ√®s ‚úÖ
# 4. Transaction confirm√©e sur Basescan avec W2
```

---

## üéâ **Avantages du Syst√®me Double Wallet + FID**

1. **Flexibilit√©** : Choix du wallet selon la strat√©gie
2. **S√©paration des risques** : Wallets ind√©pendants
3. **Surveillance hybride** : Adresse + FID simultan√©ment
4. **Configuration granulaire** : Montants et tentatives diff√©rents par wallet
5. **R√©silience** : Si un wallet √©choue, l'autre peut continuer
6. **Transparence** : Messages d√©taill√©s avec wallet et type
7. **Compatibilit√©** : Migration automatique de la base de donn√©es

Le syst√®me double wallet avec snipe par FID offre une flexibilit√© maximale pour les strat√©gies de sniping avanc√©es, permettant une gestion fine des risques et des opportunit√©s.
