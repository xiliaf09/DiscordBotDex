# Configuration des Appels Twilio pour Solana

## üì± Vue d'ensemble

Ce syst√®me vous permet de recevoir des appels t√©l√©phoniques automatiques lorsque des adresses Solana que vous trackez effectuent des transactions importantes.

## ‚öôÔ∏è Configuration

### 1. Variables d'Environnement

Ajoutez ces variables √† votre fichier `.env` :

```bash
# Configuration Twilio (partag√©e avec les alertes volume)
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+1234567890
YOUR_PHONE_NUMBER=+0987654321

# Configuration Solana Twilio
SOLANA_CALL_ENABLED=true                    # Activer/d√©sactiver les appels Solana
SOLANA_CALL_MIN_AMOUNT=0                    # Montant minimum pour d√©clencher un appel
```

### 2. Param√®tres de Configuration

#### `SOLANA_CALL_ENABLED`
- `true` : Active les appels t√©l√©phoniques pour les alertes Solana
- `false` : D√©sactive les appels t√©l√©phoniques pour les alertes Solana
- **D√©faut** : `true`

#### `SOLANA_CALL_MIN_AMOUNT`
- `0` : Appeler pour tous les mouvements (par d√©faut)
- `1.5` : Appeler seulement pour les mouvements ‚â• 1.5 SOL/tokens
- `100` : Appeler seulement pour les mouvements ‚â• 100 tokens
- **D√©faut** : `0`

## üéØ Types de Transactions Surveill√©es

Les appels sont d√©clench√©s pour tous les types de transactions d√©tect√©es :
- `token_transfer` : Transfert de tokens
- `dex_swap` : √âchange sur DEX
- `stake` : Mise en stake
- `unstake` : Retrait de stake
- `nft_transfer` : Transfert de NFT
- Et autres types de transactions

## üìû Messages d'Appel

### Format du Message
```
"Solana alert! Tracked address [8 premiers caract√®res]... has performed a [type de transaction] transaction for [montant]. This is an alert from your Solana tracker bot."
```

### Exemples de Messages
- **Avec montant** : "Solana alert! Tracked address 9WzDXwB... has performed a token_transfer transaction for 5.5 SOL. This is an alert from your Solana tracker bot."
- **Sans montant** : "Solana alert! Tracked address 9WzDXwB... has performed a stake transaction. This is an alert from your Solana tracker bot."

## üß™ Test de l'Int√©gration

Utilisez le script de test fourni :

```bash
python test_solana_twilio_integration.py
```

Ce script :
1. V√©rifie la configuration Twilio
2. Teste le parsing des montants
3. Permet de faire un appel de test (optionnel)

## üìã Commandes Discord

### Gestion des Adresses Solana
```
!soladd 9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM "Wallet Principal"
!sollist
!solremove 9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM
!solactivity [address] [limit]
!solsettings 9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM 1.5 all
!soltest
```

### Contr√¥le des Appels Twilio Solana
```
!solcallon                    # Active les appels t√©l√©phoniques
!solcalloff                   # D√©sactive les appels t√©l√©phoniques
!solcallset 1.5              # D√©finit le seuil √† 1.5 (SOL/tokens)
!solcallstatus               # Affiche le statut actuel
!solcalltest                 # Teste un appel t√©l√©phonique
```

### Exemples d'Utilisation

**Activer les appels pour tous les mouvements :**
```
!solcallon
!solcallset 0
```

**Activer les appels seulement pour les gros mouvements :**
```
!solcallon
!solcallset 10
```

**D√©sactiver temporairement les appels :**
```
!solcalloff
```

**V√©rifier la configuration :**
```
!solcallstatus
```

## üîß D√©pannage

### Probl√®mes Courants

1. **Pas d'appel re√ßu**
   - V√©rifiez que `SOLANA_CALL_ENABLED=true`
   - V√©rifiez que `SOLANA_CALL_MIN_AMOUNT` n'est pas trop √©lev√©
   - V√©rifiez la configuration Twilio

2. **Trop d'appels**
   - Augmentez `SOLANA_CALL_MIN_AMOUNT` pour filtrer les petits montants
   - D√©sactivez avec `SOLANA_CALL_ENABLED=false`

3. **Erreurs Twilio**
   - V√©rifiez que les cr√©dits Twilio sont suffisants
   - V√©rifiez que le num√©ro de t√©l√©phone est au format international

### Logs √† Surveiller

Recherchez ces messages dans les logs :
- `[SOLANA TWILIO] Emergency call triggered` : Appel d√©clench√©
- `[SOLANA TWILIO ERROR]` : Erreurs d'appel
- `[TWILIO] Solana emergency call initiated` : Appel initi√© avec succ√®s

## üí° Conseils d'Utilisation

1. **Seuils Recommand√©s**
   - Pour les gros traders : `SOLANA_CALL_MIN_AMOUNT=10`
   - Pour tous les mouvements : `SOLANA_CALL_MIN_AMOUNT=0`
   - Pour les tr√®s gros mouvements : `SOLANA_CALL_MIN_AMOUNT=100`

2. **Optimisation des Co√ªts**
   - Les appels Twilio ont un co√ªt (environ $0.02-0.05 par appel)
   - Utilisez des seuils appropri√©s pour √©viter les appels inutiles

3. **S√©curit√©**
   - Ne partagez jamais vos cl√©s Twilio
   - Utilisez des variables d'environnement s√©curis√©es

## üîÑ Int√©gration avec le Syst√®me Existant

Cette fonctionnalit√© s'int√®gre parfaitement avec :
- ‚úÖ Alertes Discord existantes
- ‚úÖ Syst√®me de tracking Solana existant
- ‚úÖ Configuration Twilio partag√©e avec les alertes volume
- ‚úÖ Base de donn√©es Solana existante

## üìä Monitoring

Le syst√®me enregistre automatiquement :
- Tous les appels d√©clench√©s
- Les erreurs d'appel
- Les tentatives d'appel ignor√©es (montant trop faible)
- Les statistiques d'utilisation

Consultez les logs pour surveiller l'activit√© et diagnostiquer les probl√®mes.
